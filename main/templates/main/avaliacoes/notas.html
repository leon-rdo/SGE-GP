{% extends "base.html" %}

{% block title %}SGE-GP | Notas{% endblock title %}

{% block aside %}
{% include "main/snippets/aside.html" %}
{% endblock aside %}

{% block content %}
<div class="col-12 col-md-9">
  <div class="row g-2">
    <div class="col-12">
      <h2>{{ object }}</h2>
      <h3>Notas</h3>

      <form method="post">
        {% csrf_token %}
        <table class="table table-success table-hover table-striped">
          <thead>
            <tr>
              <th scope="col">Aluno</th>
              <th scope="col">Nota</th>
            </tr>
          </thead>
          <tbody>
            {% for student, form in student_form_pairs %}
              <tr>
                <td>{{ student }}</td>
                  <td>
                    <input type="number" name="{{ student.id }}-grade" value="{{ form.grade.value|default_if_none:'' }}" min="0" max="10" step="any" id="{{ form.grade.auto_id }}" class="form-control" style="width: 5rem;">
                  </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
        <a href="{% url 'main:tests' object.subject.slug %}" class="btn bg-dark-green" role="button"
        style="height: min-content;">
        <i class="bi bi-arrow-left"></i>
        Voltar
      </a>
      <input class="btn bg-dark-green" type="submit" value="Enviar notas">
      </form>
    </div>
  </div>
</div>
<!--
{% for student in object.subject.class_code.enrolled.all %}
  <tr>
    <td>{{ student }}</td>
      <td>
        {% for grade in student.grade_set.all %}
          {% if grade.test.id == object.id %}
            {{ grade.grade }}
          {% else %}
            {% if forloop.last %}
              -                          
            {% endif %}
          {% endif %}
        {% empty %}
          -
        {% endfor %}
      </td>
  </tr>
{% endfor %}
-->
{% endblock content %}